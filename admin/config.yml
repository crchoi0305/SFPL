
backend:
  # ✅ Netlify(Identity + Git Gateway)를 쓰는 경우 그대로 사용
  # name: git-gateway
  # branch: main
  #
  # ✅ GitHub Pages 등 'Netlify 없이' 운영하면서도 업로드/편집이
  # GitHub 레포에 바로 커밋되길 원하면 아래 github 백엔드를 사용하세요.
  # (OAuth 설정이 필요합니다. 아래 repo/branch만 먼저 채우고,
  #  auth_endpoint 등은 배포 환경에 맞춰 추가)
  name: git-gateway
  branch: main

local_backend: false

media_folder: "assets/members"
# ✅ GitHub Pages(/repo/...)에서도 경로가 깨지지 않도록 public_folder는
# 선행 슬래시("/") 없이 상대 경로를 권장합니다.
public_folder: "assets/members"

collections:
  - name: "current"
    label: "People - Current"
    files:
      - file: "content/current.json"
        label: "Current Members"
        name: "current_members"
        fields:
          - label: "Members"
            name: "members"
            widget: list
            summary: "{{fields.name}}"
            fields:
              - { label: "Name", name: "name", widget: "string" }
              - { label: "Photo", name: "photo", widget: "image" }
              - { label: "B.S.", name: "bs", widget: "string"}
              - { label: "M.S./Ph.D.", name: "ms", widget: "string", required: false }
              - { label: "Research", name: "research", widget: "string", required: false }
              - { label: "Email", name: "email", widget: "string", required: false }
              - { label: "Bio", name: "bio", widget: "text", required: false }


  # =========================
  # News (content/news.json)
  # news.html에서 data.posts 를 쓰는 구조에 맞춤
  # =========================
  - name: "news"
    label: "News"
    media_folder: "assets/news"
    public_folder: "assets/news"
    files:
      - file: "content/news.json"
        label: "News Posts"
        name: "news_posts"
        fields:
          - label: "Posts"
            name: "posts"
            widget: "list"
            summary: "{{fields.date}} | {{fields.title}}"
            fields:
              # date가 단순 문자열이면 string으로 바꿔도 됨
              - label: "Date"
                name: "date"
                widget: "datetime"
                format: "YYYY.MM.DD"
                date_format: "YYYY.MM.DD"
                time_format: false

              - { label: "Title", name: "title", widget: "string" }
              - { label: "Description", name: "desc", widget: "text", required: false }

              # ✅ 다중 업로드(한 번에 여러 장 선택/드래그&드롭)용
              # - 기본 Media Library에서 멀티선택이 지원되면 한 번에 여러 파일을 선택할 수 있습니다.
              # - 저장 형태: ["/assets/news/a.jpg", "/assets/news/b.jpg", ...]
              # - 프론트(news.html/index.html)는 문자열 배열도 이미 지원하도록 작성되어 있습니다.
              - label: "Images (multi)"
                name: "images"
                widget: "file"
                required: false
                allow_multiple: true
                media_library:
                  config:
                    multiple: true
                # URL 입력 버튼 숨기기(원하면 true로)
                choose_url: false

              - label: "Links"
                name: "links"
                widget: "list"
                required: false
                summary: "{{fields.label}}"
                fields:
                  - { label: "Label", name: "label", widget: "string" }
                  - { label: "URL", name: "url", widget: "string" }

  # =========================
  # Photos (content/photos.json)
  # "앨범(아카이브) 단위 + 여러 이미지" 구조로 설계
  # 프론트에서 읽는 키에 맞춰 name을 수정해야 할 수 있음(예: albums/items/photos)
  # =========================
  - name: "photos"
    label: "Photos"
    files:
    - file: "content/photos.json"
      label: "Photo Albums"
      name: "photo_albums"
      fields:
        - label: "Albums"
          name: "albums"
          widget: "list"
          summary: "{{fields.date}} | {{fields.title}}"
          fields:
            - label: "Date"
              name: "date"
              widget: "datetime"
              format: "YYYY-MM-DD"     # 저장용(안전)
              date_format: "YYYY.MM.DD" # UI 표시용
              time_format: false
              required: true

            - { label: "Title", name: "title", widget: "string" }

            # ✅ 여러 장 업로드: 저장 형태가 ["assets/photos/a.jpg", ...] 로 깔끔하게 떨어지도록
            # list(image) 대신 file(allow_multiple) 사용
            - label: "Images"
              name: "images"
              widget: "file"
              allow_multiple: true
              media_folder: "assets/photos"
              public_folder: "https://raw.githubusercontent.com/crchoi0305/SFPL/main/assets/photos"
              choose_url: false


  # =========================
  # Sci (content/sci.json)
  # 논문/학회/특허 등 "성과 리스트" 형태로 범용 설계
  # 프론트 키에 맞춰 publications/items 등으로 name 조정 가능
  # =========================
  - name: "sci"
    label: "Sci / Publications"
    files:
      - file: "content/sci.json"
        label: "Publications Data"
        name: "sci_publications"
        media_folder: "assets/sci"
        public_folder: "assets/sci"
        fields:
        - label: "Publications"
          name: "publications"
          widget: "list"
          summary: "{{fields.year}} | {{fields.title}}"
          fields:
            - { label: "Year", name: "year", widget: "string" }
            - { label: "Title", name: "title", widget: "string" }

            # ✅ 저널명(venue) 다시 추가
            - { label: "Journal (venue)", name: "venue", widget: "string", required: false }

            # ✅ vol/page(기존 bib) 다시 추가
            - { label: "Vol / Page (bib)", name: "bib", widget: "string", required: false }

            - label: "Authors"
              name: "authors"
              widget: "list"
              summary: "{{fields.name}}"
              fields:
                - { label: "Name", name: "name", widget: "string" }
                - { label: "KIT-Polymer author", name: "is_lab", widget: "boolean", default: false }
                - label: "Roles"
                  name: "roles"
                  widget: "select"
                  multiple: true
                  required: false
                  options:
                    - { label: "Co-first author (†)", value: "co-first" }
                    - { label: "Corresponding author (*)", value: "corresponding" }

            - { label: "DOI (URL)", name: "doi", widget: "string", required: false }

            - label: "Thumbnail Image"
              name: "image"
              widget: "image"
              required: false

            - { label: "Note", name: "note", widget: "string", required: false }